# Evolution Report Generator

A single-command tool to generate comprehensive analysis reports from evolution datasets.

## ğŸ¯ Purpose

Instead of running multiple notebooks separately, this script provides a **complete analysis** in one command:
- Population dynamics over time
- Trait evolution patterns
- Selection pressure identification
- Extinction event detection
- Generation depth analysis
- Genetic diversity metrics
- Reproduction strategy comparison

## ğŸ“¦ Output

The script generates:
1. **`report.md`** - Comprehensive markdown report with all findings
2. **`graphs/`** - All visualizations exported as PNG files
3. **`metrics.json`** - Quantified metrics for programmatic access

## ğŸš€ Usage

### Basic Usage

```bash
cd analyzer
python generate_full_report.py datasets/evolution_1767040734262
```

### Output Location

All outputs are saved to: `<evolution_folder>/analysis/`

Example:
```
datasets/evolution_1767040734262/
  â”œâ”€â”€ metadata.json
  â”œâ”€â”€ snapshots_*.jsonl
  â”œâ”€â”€ stats_current.json
  â””â”€â”€ analysis/              â† Generated by script
      â”œâ”€â”€ report.md          â† Main report
      â”œâ”€â”€ metrics.json       â† Quantified data
      â””â”€â”€ graphs/            â† PNG visualizations
          â”œâ”€â”€ population_dynamics.png
          â”œâ”€â”€ trait_evolution.png
          â”œâ”€â”€ generation_depth.png
          â””â”€â”€ genetic_diversity.png
```

## ğŸ“Š What It Analyzes

### 1. Population Dynamics
- Population changes over time for all species
- Growth rates and final populations
- Prey:predator ratios
- Extinction event detection

### 2. Trait Evolution
- Speed, size, fear response, sociability over time
- Mean values and standard deviations
- Trait ranges and variation

### 3. Selection Pressures
- Identifies traits under active selection
- Uses coefficient of variation to detect selection
- Interprets selection intensity

### 4. Generation Depth
- Maximum and average generations reached
- Indicator of evolutionary activity
- Comparison across species

### 5. Genetic Diversity
- Color diversity as genetic proxy
- Unique genetic variants
- Population health indicators

### 6. Reproduction Strategies
- Sexual vs asexual comparison
- Generation turnover rates
- Strategy effectiveness

## ğŸ”§ Requirements

All dependencies are in `requirements.txt`:
```bash
pip install -r requirements.txt
```

## ğŸ’¡ Use Cases

### Quick Analysis After Simulation
```bash
# Run simulation, export data, analyze
python generate_full_report.py datasets/evolution_$(date +%s)000
```

### Compare Multiple Runs
```bash
# Generate reports for multiple datasets
for dir in datasets/evolution_*/; do
    python generate_full_report.py "$dir"
done

# Compare reports
diff datasets/evolution_A/analysis/report.md \
     datasets/evolution_B/analysis/report.md
```

### Extract Specific Metrics
```bash
# Use metrics.json for programmatic access
python -c "
import json
with open('datasets/evolution_X/analysis/metrics.json') as f:
    data = json.load(f)
    print(f\"Predator growth: {data['population']['growth_rates']['predator']['growth_pct']}%\")
"
```

## ğŸ“ˆ Example Output

### Report Structure

```markdown
# Evolution Analysis Report

## ğŸ“Š Population Dynamics
- Growth rates table
- Population graphs
- Extinction events

## ğŸ§¬ Trait Evolution
- Trait evolution graphs
- Trait changes table per species

## ğŸ¯ Selection Pressures
- Traits under selection
- Selection intensity

## ğŸ”¢ Generation Depth
- Generation depth chart
- Evolutionary activity

## ğŸŒˆ Genetic Diversity
- Diversity metrics
- Unique variants

## ğŸ‘¶ Reproduction Strategies
- Strategy comparison
- Effectiveness analysis

## ğŸ’¡ Key Insights
- Auto-generated insights
- Critical findings
```

## ğŸ“ Tips

1. **Use 10x sampling rate** - The script uses 10x by default for good balance
2. **Run after every experiment** - Quick way to document findings
3. **Keep reports** - Track evolution across sessions
4. **Share reports** - Markdown is easy to read and share
5. **Use metrics.json** - For automated analysis pipelines

## ğŸ”„ Integration with Workflow

### Recommended Workflow

1. **Design experiment** - Modify `stable-ecosystem.ts` parameters
2. **Run simulation** - 5-10 minutes with fast evolution profile
3. **Export data** - Multi-rate JSONL export
4. **Generate report** - `python generate_full_report.py <folder>`
5. **Review findings** - Read `report.md`, view graphs
6. **Iterate** - Adjust parameters based on insights

### Fast Iteration Loop

```bash
# Terminal 1: Run simulation
npm run dev

# Terminal 2: Watch for new datasets and auto-analyze
watch -n 10 'ls -td datasets/evolution_* | head -1 | xargs python generate_full_report.py'
```

## ğŸ› Troubleshooting

### Missing Dependencies
```bash
pip install -r requirements.txt
```

### Invalid Dataset
Ensure folder contains:
- `metadata.json`
- `stats_current.json`
- `snapshots_*.jsonl` files

### No Graphs Generated
Check that matplotlib backend is configured:
```python
import matplotlib
matplotlib.use('Agg')  # Non-interactive backend
```

## ğŸ“ Notes

- Script is **read-only** - never modifies source data
- Graphs use **dark grid style** for readability
- Report includes **auto-generated insights**
- All metrics are **quantified and exportable**

---

**Generated reports provide a complete picture of evolutionary dynamics in a single, shareable document.** ğŸ”¬âœ¨

